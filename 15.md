# Les formulaires

Les formulaires sont des éléments essentiels de l'interface utilisateur. Avec les liens (anchors), les boutons et les champs de saisie, ils permettent de créer des pages web interactives. Les formulaires peuvent être utilisés pour collecter des informations de l'utilisateur, de l'envoyer à un serveur ou de les envoyer à une autre application.

Que nous met à disposition Symfony pour créer des formulaires ?

- Une commande `make:form` pour créer un formulaire
- Un builder pour le construire facilement
- Un moteur de template pour le rendre et le personnaliser

Ça c'est la base. Par la suite on va pouvoir mettre en place des comportements et des validations spécifiques.

## Création d'un formulaire

Pour créer un formulaire, il faut exécuter la commande suivante dans votre terminal :

```bash
symfony console make:form
```

Choisissez le nom du formulaire, ici `Note`, puis appuyez sur Entrée.

Un nouveau fichier `NoteType.php` va être créé dans le dossier `src/Form`.

Voici le contenu du fichier :

```php
<?php

namespace App\Form;

use App\Entity\Note;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolver;

class NoteType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options): void
    {
        $builder
            ->add('title')
            ->add('slug')
            ->add('content')
            ->add('is_public')
            ->add('views')
            ->add('created_at')
            ->add('updated_at')
        ;
    }

    public function configureOptions(OptionsResolver $resolver): void
    {
        $resolver->setDefaults([
            'data_class' => Note::class,
        ]);
    }
}
```

Nous avons les champs suivants :

- `title`
- `slug`
- `content`
- `is_public`
- `views`
- `created_at`
- `updated_at`

Ces champs sont des propriétés de l'entité `Note`. Ils sont définis dans le fichier `src/Entity/Note.php`. Nous les avons automatique car nous avons choisi de lié le formulaire à l'entité `Note` avec l'assitant de makerBundle (`make:form`).

## Personnalisation du formulaire

Pour personnaliser le formulaire, il faut aller dans le fichier `NoteType.php` dans le dossier `src/Form`. Symfony met à disposition un ensemble de type de champs pour créer des formulaires. La liste complète est disponible sur la [documentation officielle](https://symfony.com/doc/current/reference/forms/types.html).

Pour notre cas, nous allons ajouter les champs suivants :

```php

//...

$builder
    ->add('title', TextType::class, [
        'label' => 'Choose a title',
        'label_attr' => ['class' => 'text-violet-950 font-semibold'],
        'attr' => [
            'class' => 'border-2 border-violet-950 rounded-md p-2 w-full focus:border-violet-600',
        ],
        'help' => 'This is the title of your note',
        'help_attr' => ['class' => 'text-sm text-violet-600'],
    ])
    ->add('content', TextareaType::class, [
        'label' => 'Write your code',
        'label_attr' => ['class' => 'text-violet-950 font-semibold'],
        'attr' => [
            'class' => 'border-2 border-violet-950 rounded-md p-2 w-full focus:border-violet-600',
        ],
        'help' => 'What do you want to share on CodeXpress?',
        'help_attr' => ['class' => 'text-sm text-violet-600'],
    ])
    ->add('is_public', CheckboxType::class, [
        'label' => 'Public or private',
        'label_attr' => ['class' => 'text-violet-950 font-semibold'],
        'attr' => [
            'class' => 'border-2 border-violet-950 rounded-md p-2 w-full focus:border-violet-600',
        ],
    ])
    ->add('category', EntityType::class, [
        'class' => Category::class,
        'label' => 'In which category?',
        'label_attr' => ['class' => 'text-violet-950 font-semibold'],
        'attr' => [
            'class' => 'border-2 border-violet-950 rounded-md p-2 w-full focus:border-violet-600',
            'placeholder' => 'Choose a category',
        ],
        'help' => 'It will be used to sort your notes',
        'help_attr' => ['class' => 'text-sm text-violet-600'],
    ])
    //...
```
